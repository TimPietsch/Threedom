<!DOCTYPE html>
<html>
<head>
    <title>Viewport Test</title>
    <script src="jquery-2.2.0.min.js"></script>
    <script>
        $(document).ready(function(){
            
            // adjust perspective
            
            $('#perspective-input').on('input', function(){
                var perspective = $(this).val();
                $('#td-vp').css('perspective', perspective + 'px');
                $(this).attr('title', perspective);
            });
            
            // adjust angle
            
            $('#angle-input').on('input', function(){
                var oldValues = $('#td-map-frame').attr('style').substring(11); // remove "transform: "
                var newValues = oldValues.replace(/rotateX\(-?[\d]+deg\)/, 'rotateX(' + $(this).val() + 'deg)');
                $('#td-map-frame').css('transform', newValues.slice(0,-1)); // remove trailing ;
                $(this).attr('title', $(this).val());
            });
            
            // adjust rotation
            
            $('#rotation-input').on('input', function(){
                var oldValues = $('#td-map-frame').attr('style').substring(11); // remove "transform: "
                var newValues = oldValues.replace(/rotateZ\(-?[\d]+deg\)/, 'rotateZ(' + $(this).val() + 'deg)');
                $('#td-map-frame').css('transform', newValues.slice(0,-1)); // remove trailing ;
                $(this).attr('title', $(this).val());
            });
            
            // adjust center map height
            
            $('#debug-controls-group_levels + section > input').on('input', function(){
                var tile = $(this).attr('id').slice(-2);
                var newClass = 'td-lvl_' + $(this).val();
                var oldClasses = $('#td-map_'+tile).attr('class');
                $('#td-map_'+tile).attr('class', oldClasses.replace(/td-lvl_[\d]+/, newClass));
                $(this).attr('title', $(this).val());
            });
        });
    </script>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="td.css">
    <link rel="stylesheet" href="debug.css">
    <style>
        /* background */
        
        body {
            
            /* Set transparent tile background */
            
            background-size: 16px 16px;
            background-image: url(transparent.gif);
            
            /* Disable interpolation */
            
            image-rendering: -moz-crisp-edges;
            image-rendering: -o-crisp-edges;
            image-rendering: -webkit-optimize-contrast;
            -ms-interpolation-mode: nearest-neighbor;
            image-rendering: pixelated;
            
            /* Disable scrollbars */
            
            overflow: hidden;
        }
        
        /* map specifics, testing stuff */
        
        .td-map * {
            /* opacity: .8; */
            border: 1px solid black;
            background-color: green;
        }
        .td-map *:hover {
            background-color: #00aa00;
        }
        
    </style>
</head>
<body>
    <section id="td-vp">
        <section id="td-map-frame" style="transform: rotateX(30deg) rotateZ(0deg)">
            <section id="td-map_nw" class="td-map td-lvl_1">
                <article class="td-map-ground"></article>
            </section><section id="td-map_nc" class="td-map td-lvl_1">
                <article class="td-map-ground"></article>
            </section><section id="td-map_ne" class="td-map td-lvl_1">
                <article class="td-map-ground"></article>
            </section><section id="td-map_cw" class="td-map td-lvl_1">
                <article class="td-map-ground"></article>
            </section><section id="td-map_cc" class="td-map td-lvl_1">
                <article class="td-map-ground"></article>
            </section><section id="td-map_ce" class="td-map td-lvl_1">
                <article class="td-map-ground"></article>
            </section><section id="td-map_sw" class="td-map td-lvl_1">
                <article class="td-map-ground"></article>
            </section><section id="td-map_sc" class="td-map td-lvl_1">
                <article class="td-map-ground"></article>
            </section><section id="td-map_se" class="td-map td-lvl_1">
                <article class="td-map-ground"></article>
            </section>
        </section>
    </section>
    <section id="debug-controls">
        <label for="debug-controls-group_perspective" class="debug-controls-group-toggle">Kamera</label>
        <input id="debug-controls-group_perspective" type="checkbox">
        <section class="debug-controls-group">
            <label for="perspective-input">Perspektive</label>
            <input id="perspective-input" type="range" min="0" max="1000" value="500" title="500">
            <label for="angle-input">Winkel</label>
            <input id="angle-input" type="range" min="0" max="89" value="30" title="30">
            <label for="rotation-input">Rotation</label>
            <input id="rotation-input" type="range" min="0" max="360" value="0" title="0">
        </section>
        <label for="debug-controls-group_levels" class="debug-controls-group-toggle">Level</label>
        <input id="debug-controls-group_levels" type="checkbox">
        <section class="debug-controls-group">
            <label for="level-input_nw">Nordwesten</label>
            <input id="level-input_nw" type="range" min="1" max="5" value="1" title="1">
            <label for="level-input_nc">Nord</label>
            <input id="level-input_nc" type="range" min="1" max="5" value="1" title="1">
            <label for="level-input_ne">Nordosten</label>
            <input id="level-input_ne" type="range" min="1" max="5" value="1" title="1">
            <label for="level-input_cw">Westen</label>
            <input id="level-input_cw" type="range" min="1" max="5" value="1" title="1">
            <label for="level-input_cc">Mitte</label>
            <input id="level-input_cc" type="range" min="1" max="5" value="1" title="1">
            <label for="level-input_ce">Osten</label>
            <input id="level-input_ce" type="range" min="1" max="5" value="1" title="1">
            <label for="level-input_sw">Südwesten</label>
            <input id="level-input_sw" type="range" min="1" max="5" value="1" title="1">
            <label for="level-input_sc">Süden</label>
            <input id="level-input_sc" type="range" min="1" max="5" value="1" title="1">
            <label for="level-input_se">Südosten</label>
            <input id="level-input_se" type="range" min="1" max="5" value="1" title="1">
        </section>
    </section>
</body>
</html>
